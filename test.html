<html>
<head>
    <title>Nested Horizontal Timeline</title>
    <link rel="stylesheet" type="text/css" href="dist/css/style.css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <style>
        #test-carousel, #project-carousel {
            position:relative;
            margin: 0 auto;
            top: 100px;
            width: 75%;
        }
    </style>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    
    <script src="dist/js/jquery-nested-carousel.js"></script>
</head>
<!--
<div id="test-carousel"></div>
-->
<div id="project-carousel"></div>
<script>

    (function ($) {
        var data =
                [
                    {
                        "id": 1,
                        "name": "Introduction to Project 1A Flyer",
                        "list": [
                            {
                                "id": "Test ProjectId",
                                "state": 1
                            }
                        ]
                    },
                    {
                        "id": 2,
                        "name": "Objective 1",
                        "list": [
                            {
                                "id": "1",
                                "name": "Activity 1.1",
                                "state": 1
                            },
                            {
                                "id": "2",
                                "name": "Activity 1.2",
                                "state": 0
                            }
                        ]
                    },
                    {
                        "id": 3,
                        "name": "Objective 2",
                        "selected": true,
                        "list": [
                            {
                                "id": "3",
                                "name": "Activity 2.1",
                                "state": 1
                            },
                            {
                                "id": "4",
                                "name": "Activity 2.2",
                                "state": 1
                            },
                            {
                                "id": "5",
                                "name": "Activity 2.3",
                                "state": 0,
                                "selected": true
                            },
                            {
                                "id": "6",
                                "name": "Activity 2.4",
                                "state": 0
                            }
                        ]
                    },
                    {
                        "id": 4,
                        "name": "Objective 3",
                        "list": [
                            {
                                "id": "8",
                                "name": "Activity 3.1",
                                "state": 1
                            },
                            {
                                "id": "9",
                                "name": "Activity 3.2",
                                "state": 1
                            },
                            {
                                "id": "10",
                                "name": "Activity 3.3",
                                "state": 1
                            },
                            {
                                "id": "11",
                                "name": "Activity 3.4",
                                "state": 1
                            },
                            {
                                "id": "12",
                                "name": "Activity 3.5",
                                "state": 1
                            },
                            {
                                "id": "13",
                                "name": "Activity 3.6",
                                "state": 1
                            }
                        ]
                    },
                    {
                        "id": 5,
                        "name": "Objective 4",
                        "list": [
                            {
                                "id": "14",
                                "name": "Activity 4.1",
                                "state": 1
                            },
                            {
                                "id": "15",
                                "name": "Activity 4.2",
                                "state": 1
                            },
                            {
                                "id": "16",
                                "name": "Activity 4.3",
                                "state": 1
                            },
                            {
                                "id": "17",
                                "name": "Activity 4.4",
                                "state": 1
                            },
                            {
                                "id": "18",
                                "name": "Activity 4.5",
                                "state": 1
                            },
                            {
                                "id": "19",
                                "name": "Activity 4.6",
                                "state": 1
                            }
                        ]
                    }
                ];

        var projectJson =
        {
            "id": "1A",
            "title": "Project 1A: Note Form",
            "documents": [
                {
                    "name": "fig1.jpeg"
                }
            ],
            "objectives": [
                {
                    "order": 1,
                    "name": "Explore Microsoft Office 2016",
                    "progress": 60,
                    "id": 1,
                    "activities": [
                        {
                            "id": "1",
                            "title": "OF Activity 1.01: Using File Explorer to Download, Extract, and Locate Files and Folders",
                            "progress": 50
                        },
                        {
                            "id": "2",
                            "title": "OF Activity 1.02: Using Start Search to Locate and Start a Microsoft Office 2013 Desktop App",
                            "progress": 50
                        },
                        {
                            "id": "3",
                            "title": "OF Activity 1.03: Entering and Editing Text in an Office 2013 Program",
                            "progress": 50
                        },
                        {
                            "id": "4",
                            "title": "OF Activity 1.04: Checking Spelling",
                            "progress": 50
                        },
                        {
                            "id": "5",
                            "title": "OF Activity 1.05: Performing Commands from a Dialog Box",
                            "progress": 50

                        },
                        {
                            "id": "6",
                            "title": "OF Activity 1.06: Using Undo",
                            "progress": 50
                        }
                    ]
                },
                {
                    "id": 2,
                    "order": 2,
                    "name": "Enter, Edit and Check th Spelling of Text in an Office 2016 Program",
                    "progress": 10,
                    "activities": [
                        {
                            "id": "7",
                            "title": "OF Activity 1.01: Using File Explorer to Download, Extract, and Locate Files and Folders",
                            "progress": 50
                        },
                        {
                            "id": "8",
                            "title": "OF Activity 1.02: Using Start Search to Locate and Start a Microsoft Office 2013 Desktop App",
                            "progress": 50
                        },
                        {
                            "id": "9",
                            "title": "OF Activity 1.03: Entering and Editing Text in an Office 2013 Program",
                            "progress": 50

                        }
                    ]
                },
                {
                    "id": 3,
                    "order": 3,
                    "name": "Create a Folder and Name and Save a File",
                    "progress": 10,
                    "activities": [
                        {
                            "id": "13",
                            "title": "OF Activity 1.01: Using File Explorer to Download, Extract, and Locate Files and Folders",
                            "progress": 50

                        },
                        {
                            "id": "14",
                            "title": "OF Activity 1.02: Using Start Search to Locate and Start a Microsoft Office 2013 Desktop App",
                            "progress": 50

                        },
                        {
                            "id": "15",
                            "title": "OF Activity 1.03: Entering and Editing Text in an Office 2013 Program",
                            "progress": 50

                        },
                        {
                            "id": "16",
                            "title": "OF Activity 1.04: Checking Spelling",
                            "progress": 50

                        },
                        {
                            "id": "17",
                            "title": "OF Activity 1.05: Performing Commands from a Dialog Box",
                            "progress": 50

                        },
                        {
                            "id": "18",
                            "title": "OF Activity 1.06: Using Undo",
                            "progress": 50

                        }
                    ]
                },
                {
                    "id": 4,
                    "order": 4,
                    "name": "Insert a Footer,Add Document Properties, Print a File, and Close a Desktop App",
                    "progress": 10,
                    "activities": [
                        {
                            "id": "19",
                            "title": "OF Activity 1.01: Using File Explorer to Download, Extract, and Locate Files and Folders",
                            "progress": 50

                        },
                        {
                            "id": "20",
                            "title": "OF Activity 1.02: Using Start Search to Locate and Start a Microsoft Office 2013 Desktop App",
                            "progress": 50

                        },
                        {
                            "id": "21",
                            "title": "OF Activity 1.03: Entering and Editing Text in an Office 2013 Program",
                            "progress": 50

                        },
                        {
                            "id": "22",
                            "title": "OF Activity 1.04: Checking Spelling",
                            "progress": 50

                        },
                        {
                            "id": "23",
                            "title": "OF Activity 1.05: Performing Commands from a Dialog Box",
                            "progress": 50

                        },
                        {
                            "id": "24",
                            "title": "OF Activity 1.06: Using Undo",
                            "progress": 50

                        }
                    ]
                }
            ]
        };
        var     carouselData = [];

        carouselData.push({
            "id": 0,
            "name": projectJson.title,
            "list": [
                {
                    "id": projectJson.id,
                    "state": 0
                }
            ]
        });
        projectJson.objectives.forEach(function (objective,objIndex) {
            var currentObjective = {
                "id": objective.id,
                "name": objective.name,
                "list": []
            };
            if(objIndex == 1){
                currentObjective.selected = true;
            }
            objective.activities.forEach(function (activity,actIndex) {
                var currentActivity = {
                    "id": activity.id,
                    "name": activity.title,
                    "state": (activity.progress < 100) ? 0 : 1
                };
                if(objIndex ==1 && actIndex == 2){
                    currentActivity.selected = true;
                }
                currentObjective.list.push(currentActivity);

            });
            carouselData.push(currentObjective);
        });
/*
        $("#test-carousel").nestedTimeline({"data": data,"nodeSwitchCallback": function(nodeData){console.log("NodeData",nodeData);}});
*/
        console.log(carouselData);
        carouselData.push({
            "id": 789,
            "name": "Project Assessment 3B",
            "list": [
                {
                    "id": 1,
                    "state": 0
                }
            ]
        });
        carouselData.push({
            "id": 123,
            "name": "End of Chapter",
            "list": [
                {
                    "id": 1,
                    "state": 0
                }
            ]
        });
        $("#project-carousel").nestedTimeline({"data": carouselData,"mode":"nested","nodeSwitchCallback": function(nodeData){console.log("NodeData",nodeData);}});
    })(jQuery);
</script>
</html>